import { BotConfig, ApiProfile, SlashCommand, BotDeploymentType, AuthType, ResponseType } from './types';

/**
 * ãƒœãƒƒãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å‹å®šç¾©
 */
export interface BotTemplate {
  id: string;
  name: string;
  description: string;
  category: 'utility' | 'fun' | 'moderation' | 'api-integration' | 'custom';
  icon?: string; // çµµæ–‡å­—ã¾ãŸã¯ã‚¢ã‚¤ã‚³ãƒ³å
  thumbnail?: string; // ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒURL
  defaultBotConfig: Partial<BotConfig>;
  apiProfiles: ApiProfile[];
  commands: Omit<SlashCommand, 'id'>[];
  tags: string[];
  difficulty: 'beginner' | 'intermediate' | 'advanced';
}

/**
 * åˆ©ç”¨å¯èƒ½ãªãƒœãƒƒãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¸€è¦§
 */
export const BOT_TEMPLATES: BotTemplate[] = [
  // 1. ã‚·ãƒ³ãƒ—ãƒ«ãªæŒ¨æ‹¶ãƒœãƒƒãƒˆï¼ˆåˆå¿ƒè€…å‘ã‘ï¼‰
  {
    id: 'simple-greeting',
    name: 'æŒ¨æ‹¶ãƒœãƒƒãƒˆ',
    description: 'ã‚·ãƒ³ãƒ—ãƒ«ãªæŒ¨æ‹¶ã‚³ãƒãƒ³ãƒ‰ã‚’æŒã¤ãƒœãƒƒãƒˆã€‚Discord Botã®åŸºæœ¬ã‚’å­¦ã¶ã®ã«æœ€é©ã§ã™ã€‚',
    category: 'fun',
    icon: 'ğŸ‘‹',
    defaultBotConfig: {
      deploymentType: 'INTERACTIONS_ENDPOINT' as BotDeploymentType,
      description: 'ã‚·ãƒ³ãƒ—ãƒ«ãªæŒ¨æ‹¶ãƒœãƒƒãƒˆ',
    },
    apiProfiles: [],
    commands: [
      {
        name: 'hello',
        description: 'æŒ¨æ‹¶ã‚’ã—ã¾ã™',
        options: [],
        responseType: 'STATIC_TEXT' as ResponseType,
        staticText: 'ã“ã‚“ã«ã¡ã¯ï¼ğŸ‘‹ ç§ã¯æŒ¨æ‹¶ãƒœãƒƒãƒˆã§ã™ï¼',
        autoGeneratedCode: true,
      },
      {
        name: 'ping',
        description: 'Pong!ã¨è¿”ã—ã¾ã™',
        options: [],
        responseType: 'STATIC_TEXT' as ResponseType,
        staticText: 'Pong! ğŸ“',
        autoGeneratedCode: true,
      },
      {
        name: 'greet',
        description: 'æŒ‡å®šã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æŒ¨æ‹¶ã—ã¾ã™',
        options: [
          {
            name: 'user',
            description: 'æŒ¨æ‹¶ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼',
            type: 'user',
            required: true,
          },
        ],
        responseType: 'STATIC_TEXT' as ResponseType,
        staticText: 'ã“ã‚“ã«ã¡ã¯ã€{user}ã•ã‚“ï¼ ğŸ‘‹',
        autoGeneratedCode: true,
      },
    ],
    tags: ['åˆå¿ƒè€…', 'æŒ¨æ‹¶', 'ã‚·ãƒ³ãƒ—ãƒ«'],
    difficulty: 'beginner',
  },

  // 2. ã‚µãƒ¼ãƒãƒ¼æƒ…å ±ãƒœãƒƒãƒˆï¼ˆä¸­ç´šè€…å‘ã‘ï¼‰
  {
    id: 'server-info',
    name: 'ã‚µãƒ¼ãƒãƒ¼ç®¡ç†ãƒœãƒƒãƒˆ',
    description: 'ã‚µãƒ¼ãƒãƒ¼ã‚„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹ç®¡ç†ç”¨ãƒœãƒƒãƒˆã€‚Discord APIã®ä½¿ã„æ–¹ã‚’å­¦ã¹ã¾ã™ã€‚',
    category: 'utility',
    icon: 'ğŸ“Š',
    defaultBotConfig: {
      deploymentType: 'INTERACTIONS_ENDPOINT' as BotDeploymentType,
      description: 'ã‚µãƒ¼ãƒãƒ¼æƒ…å ±è¡¨ç¤ºãƒœãƒƒãƒˆ',
    },
    apiProfiles: [],
    commands: [
      {
        name: 'serverinfo',
        description: 'ã‚µãƒ¼ãƒãƒ¼ã®æƒ…å ±ã‚’è¡¨ç¤ºã—ã¾ã™',
        options: [],
        responseType: 'STATIC_TEXT' as ResponseType,
        staticText: 'ğŸ“Š ã‚µãƒ¼ãƒãƒ¼æƒ…å ±\n\nã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯å®Ÿè£…ä¸­ã§ã™ã€‚Discord APIã‚’ä½¿ç”¨ã—ã¦ã‚µãƒ¼ãƒãƒ¼æƒ…å ±ã‚’å–å¾—ã§ãã¾ã™ã€‚',
        autoGeneratedCode: true,
      },
      {
        name: 'userinfo',
        description: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æƒ…å ±ã‚’è¡¨ç¤ºã—ã¾ã™',
        options: [
          {
            name: 'user',
            description: 'æƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼',
            type: 'user',
            required: true,
          },
        ],
        responseType: 'STATIC_TEXT' as ResponseType,
        staticText: 'ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±: {user}\n\nã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯å®Ÿè£…ä¸­ã§ã™ã€‚Discord APIã‚’ä½¿ç”¨ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—ã§ãã¾ã™ã€‚',
        autoGeneratedCode: true,
      },
      {
        name: 'membercount',
        description: 'ã‚µãƒ¼ãƒãƒ¼ã®ãƒ¡ãƒ³ãƒãƒ¼æ•°ã‚’è¡¨ç¤ºã—ã¾ã™',
        options: [],
        responseType: 'STATIC_TEXT' as ResponseType,
        staticText: 'ğŸ‘¥ ã“ã®ã‚µãƒ¼ãƒãƒ¼ã«ã¯å¤šãã®ãƒ¡ãƒ³ãƒãƒ¼ãŒã„ã¾ã™ï¼',
        autoGeneratedCode: true,
      },
    ],
    tags: ['ç®¡ç†', 'æƒ…å ±', 'ã‚µãƒ¼ãƒãƒ¼'],
    difficulty: 'intermediate',
  },

  // 3. å¤©æ°—æƒ…å ±ãƒœãƒƒãƒˆï¼ˆAPIé€£æºï¼‰
  {
    id: 'weather-bot',
    name: 'å¤©æ°—æƒ…å ±ãƒœãƒƒãƒˆ',
    description: 'OpenWeatherMap APIã‚’ä½¿ç”¨ã—ã¦å¤©æ°—æƒ…å ±ã‚’æä¾›ã™ã‚‹ãƒœãƒƒãƒˆã€‚å¤–éƒ¨APIé€£æºã®åŸºæœ¬ã‚’å­¦ã¹ã¾ã™ã€‚',
    category: 'api-integration',
    icon: 'ğŸŒ¤ï¸',
    defaultBotConfig: {
      deploymentType: 'INTERACTIONS_ENDPOINT' as BotDeploymentType,
      description: 'å¤©æ°—æƒ…å ±æä¾›ãƒœãƒƒãƒˆ',
    },
    apiProfiles: [
      {
        id: 'openweathermap',
        name: 'OpenWeatherMap',
        baseUrl: 'https://api.openweathermap.org/data/2.5',
        authType: 'API_KEY_QUERY' as AuthType,
        apiKeyName: 'appid',
        envVarKey: 'OPENWEATHERMAP_API_KEY',
        envVarUrl: 'OPENWEATHERMAP_BASE_URL',
      },
    ],
    commands: [
      {
        name: 'weather',
        description: 'æŒ‡å®šã—ãŸéƒ½å¸‚ã®å¤©æ°—ã‚’å–å¾—ã—ã¾ã™',
        options: [
          {
            name: 'city',
            description: 'éƒ½å¸‚åï¼ˆä¾‹: Tokyo, Osakaï¼‰',
            type: 'string',
            required: true,
          },
        ],
        responseType: 'API_CALL' as ResponseType,
        apiProfileId: 'openweathermap',
        apiEndpoint: '/weather?q={city}&units=metric&lang=ja',
        fieldMappings: [
          {
            fieldPath: 'name',
            displayLabel: 'éƒ½å¸‚',
            formatString: '{name}',
          },
          {
            fieldPath: 'weather.0.description',
            displayLabel: 'å¤©æ°—',
            formatString: '{weather.0.description}',
          },
          {
            fieldPath: 'main.temp',
            displayLabel: 'æ°—æ¸©',
            formatString: '{main.temp}Â°C',
          },
          {
            fieldPath: 'main.humidity',
            displayLabel: 'æ¹¿åº¦',
            formatString: '{main.humidity}%',
          },
        ],
        autoGeneratedCode: true,
      },
      {
        name: 'forecast',
        description: 'æŒ‡å®šã—ãŸéƒ½å¸‚ã®5æ—¥é–“ã®å¤©æ°—äºˆå ±ã‚’å–å¾—ã—ã¾ã™',
        options: [
          {
            name: 'city',
            description: 'éƒ½å¸‚åï¼ˆä¾‹: Tokyo, Osakaï¼‰',
            type: 'string',
            required: true,
          },
        ],
        responseType: 'API_CALL' as ResponseType,
        apiProfileId: 'openweathermap',
        apiEndpoint: '/forecast?q={city}&units=metric&lang=ja&cnt=5',
        autoGeneratedCode: true,
      },
    ],
    tags: ['å¤©æ°—', 'APIé€£æº', 'å¤–éƒ¨API'],
    difficulty: 'intermediate',
  },

  // 4. FAQ/ãƒ˜ãƒ«ãƒ—ãƒœãƒƒãƒˆ
  {
    id: 'faq-bot',
    name: 'FAQ/ãƒ˜ãƒ«ãƒ—ãƒœãƒƒãƒˆ',
    description: 'ã‚ˆãã‚ã‚‹è³ªå•ã«è‡ªå‹•ã§ç­”ãˆã‚‹ãƒœãƒƒãƒˆã€‚ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚µãƒãƒ¼ãƒˆã«ä¾¿åˆ©ã§ã™ã€‚',
    category: 'utility',
    icon: 'â“',
    defaultBotConfig: {
      deploymentType: 'INTERACTIONS_ENDPOINT' as BotDeploymentType,
      description: 'FAQè‡ªå‹•å¿œç­”ãƒœãƒƒãƒˆ',
    },
    apiProfiles: [],
    commands: [
      {
        name: 'faq',
        description: 'ã‚ˆãã‚ã‚‹è³ªå•ã‚’è¡¨ç¤ºã—ã¾ã™',
        options: [
          {
            name: 'category',
            description: 'ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠ',
            type: 'string',
            required: true,
          },
        ],
        responseType: 'STATIC_TEXT' as ResponseType,
        staticText: 'ğŸ“š ã‚ˆãã‚ã‚‹è³ªå•\n\nã‚«ãƒ†ã‚´ãƒª: {category}\n\nã“ã“ã«å›ç­”ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚',
        autoGeneratedCode: true,
      },
      {
        name: 'help',
        description: 'ãƒœãƒƒãƒˆã®ä½¿ã„æ–¹ã‚’è¡¨ç¤ºã—ã¾ã™',
        options: [],
        responseType: 'STATIC_TEXT' as ResponseType,
        staticText: 'ğŸ“– ãƒ˜ãƒ«ãƒ—\n\nåˆ©ç”¨å¯èƒ½ãªã‚³ãƒãƒ³ãƒ‰:\nâ€¢ /faq - ã‚ˆãã‚ã‚‹è³ªå•ã‚’è¡¨ç¤º\nâ€¢ /help - ã“ã®ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤º\nâ€¢ /contact - ã‚µãƒãƒ¼ãƒˆã¸ã®é€£çµ¡æ–¹æ³•',
        autoGeneratedCode: true,
      },
      {
        name: 'contact',
        description: 'ã‚µãƒãƒ¼ãƒˆã¸ã®é€£çµ¡æ–¹æ³•ã‚’è¡¨ç¤ºã—ã¾ã™',
        options: [],
        responseType: 'STATIC_TEXT' as ResponseType,
        staticText: 'ğŸ“§ ãŠå•ã„åˆã‚ã›\n\nã‚µãƒãƒ¼ãƒˆãŒå¿…è¦ãªå ´åˆã¯ã€ã‚µãƒ¼ãƒãƒ¼ã®ç®¡ç†è€…ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚',
        autoGeneratedCode: true,
      },
    ],
    tags: ['FAQ', 'ãƒ˜ãƒ«ãƒ—', 'ã‚µãƒãƒ¼ãƒˆ'],
    difficulty: 'beginner',
  },

  // 5. ã‚²ãƒ¼ãƒ /ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ¡ãƒ³ãƒˆãƒœãƒƒãƒˆ
  {
    id: 'fun-games',
    name: 'ã‚²ãƒ¼ãƒ ãƒœãƒƒãƒˆ',
    description: 'ã‚µã‚¤ã‚³ãƒ­ã‚„ã˜ã‚ƒã‚“ã‘ã‚“ãªã©ã®ãƒŸãƒ‹ã‚²ãƒ¼ãƒ ã§éŠã¹ã‚‹ãƒœãƒƒãƒˆã€‚',
    category: 'fun',
    icon: 'ğŸ®',
    defaultBotConfig: {
      deploymentType: 'INTERACTIONS_ENDPOINT' as BotDeploymentType,
      description: 'ã‚²ãƒ¼ãƒ ãƒ»ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ¡ãƒ³ãƒˆãƒœãƒƒãƒˆ',
    },
    apiProfiles: [],
    commands: [
      {
        name: 'dice',
        description: 'ã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã‚Šã¾ã™',
        options: [],
        responseType: 'STATIC_TEXT' as ResponseType,
        staticText: 'ğŸ² ã‚µã‚¤ã‚³ãƒ­ã®çµæœ: {random(1, 6)}',
        autoGeneratedCode: true,
      },
      {
        name: 'coinflip',
        description: 'ã‚³ã‚¤ãƒ³ã‚’æŠ•ã’ã¾ã™',
        options: [],
        responseType: 'STATIC_TEXT' as ResponseType,
        staticText: 'ğŸª™ çµæœ: {random("è¡¨", "è£")}',
        autoGeneratedCode: true,
      },
      {
        name: 'rps',
        description: 'ã˜ã‚ƒã‚“ã‘ã‚“ã‚’ã—ã¾ã™',
        options: [
          {
            name: 'choice',
            description: 'ã‚°ãƒ¼ã€ãƒãƒ§ã‚­ã€ãƒ‘ãƒ¼ã‹ã‚‰é¸æŠ',
            type: 'string',
            required: true,
          },
        ],
        responseType: 'STATIC_TEXT' as ResponseType,
        staticText: 'ã‚ãªãŸ: {choice}\nãƒœãƒƒãƒˆ: {random("ã‚°ãƒ¼", "ãƒãƒ§ã‚­", "ãƒ‘ãƒ¼")}\n\nçµæœã¯...ï¼Ÿ',
        autoGeneratedCode: true,
      },
    ],
    tags: ['ã‚²ãƒ¼ãƒ ', 'å¨¯æ¥½', 'ãƒ©ãƒ³ãƒ€ãƒ '],
    difficulty: 'beginner',
  },

  // 6. ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼/ã‚¿ã‚¹ã‚¯ç®¡ç†ãƒœãƒƒãƒˆ
  {
    id: 'reminder-bot',
    name: 'ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ãƒœãƒƒãƒˆ',
    description: 'ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚„ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½ã‚’æŒã¤ãƒœãƒƒãƒˆï¼ˆåŸºæœ¬ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼‰ã€‚',
    category: 'utility',
    icon: 'â°',
    defaultBotConfig: {
      deploymentType: 'INTERACTIONS_ENDPOINT' as BotDeploymentType,
      description: 'ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ãƒ»ã‚¿ã‚¹ã‚¯ç®¡ç†ãƒœãƒƒãƒˆ',
    },
    apiProfiles: [],
    commands: [
      {
        name: 'remind',
        description: 'ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚’è¨­å®šã—ã¾ã™ï¼ˆåŸºæœ¬ç‰ˆï¼‰',
        options: [
          {
            name: 'message',
            description: 'ãƒªãƒã‚¤ãƒ³ãƒ‰ã™ã‚‹å†…å®¹',
            type: 'string',
            required: true,
          },
          {
            name: 'time',
            description: 'æ™‚é–“ï¼ˆä¾‹: 1h, 30mï¼‰',
            type: 'string',
            required: true,
          },
        ],
        responseType: 'STATIC_TEXT' as ResponseType,
        staticText: 'â° ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚’è¨­å®šã—ã¾ã—ãŸï¼\n\nå†…å®¹: {message}\næ™‚é–“: {time}\n\nâ€»ã“ã®æ©Ÿèƒ½ã‚’å®Œå…¨ã«å®Ÿè£…ã™ã‚‹ã«ã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ¼ãŒå¿…è¦ã§ã™ã€‚',
        autoGeneratedCode: true,
      },
      {
        name: 'todo',
        description: 'TODOãƒªã‚¹ãƒˆã«è¿½åŠ ã—ã¾ã™',
        options: [
          {
            name: 'task',
            description: 'ã‚¿ã‚¹ã‚¯ã®å†…å®¹',
            type: 'string',
            required: true,
          },
        ],
        responseType: 'STATIC_TEXT' as ResponseType,
        staticText: 'âœ… ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ã—ã¾ã—ãŸ: {task}\n\nâ€»ã“ã®æ©Ÿèƒ½ã‚’å®Œå…¨ã«å®Ÿè£…ã™ã‚‹ã«ã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒå¿…è¦ã§ã™ã€‚',
        autoGeneratedCode: true,
      },
    ],
    tags: ['ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼', 'ã‚¿ã‚¹ã‚¯ç®¡ç†', 'ç”Ÿç”£æ€§'],
    difficulty: 'intermediate',
  },

  // 7. å¼•ç”¨/åè¨€ãƒœãƒƒãƒˆï¼ˆå¤–éƒ¨APIï¼‰
  {
    id: 'quote-bot',
    name: 'åè¨€ãƒœãƒƒãƒˆ',
    description: 'ãƒ©ãƒ³ãƒ€ãƒ ãªåè¨€ã‚„å¼•ç”¨ã‚’è¡¨ç¤ºã™ã‚‹ãƒœãƒƒãƒˆã€‚',
    category: 'fun',
    icon: 'ğŸ’­',
    defaultBotConfig: {
      deploymentType: 'INTERACTIONS_ENDPOINT' as BotDeploymentType,
      description: 'åè¨€ãƒ»å¼•ç”¨ãƒœãƒƒãƒˆ',
    },
    apiProfiles: [
      {
        id: 'quotable',
        name: 'Quotable API',
        baseUrl: 'https://api.quotable.io',
        authType: 'NONE' as AuthType,
        envVarKey: '',
        envVarUrl: 'QUOTABLE_BASE_URL',
      },
    ],
    commands: [
      {
        name: 'quote',
        description: 'ãƒ©ãƒ³ãƒ€ãƒ ãªåè¨€ã‚’è¡¨ç¤ºã—ã¾ã™',
        options: [],
        responseType: 'API_CALL' as ResponseType,
        apiProfileId: 'quotable',
        apiEndpoint: '/random',
        fieldMappings: [
          {
            fieldPath: 'content',
            displayLabel: 'åè¨€',
            formatString: '"{content}"',
          },
          {
            fieldPath: 'author',
            displayLabel: 'è‘—è€…',
            formatString: 'â€” {author}',
          },
        ],
        autoGeneratedCode: true,
      },
    ],
    tags: ['åè¨€', 'å¼•ç”¨', 'ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³'],
    difficulty: 'beginner',
  },

  // 8. ç©ºã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆã‚«ã‚¹ã‚¿ãƒ ç”¨ï¼‰
  {
    id: 'blank',
    name: 'ç©ºã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ',
    description: 'ã‚¼ãƒ­ã‹ã‚‰è‡ªåˆ†ã§ãƒœãƒƒãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚å®Œå…¨ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ã§ã™ã€‚',
    category: 'custom',
    icon: 'ğŸ“',
    defaultBotConfig: {
      deploymentType: 'INTERACTIONS_ENDPOINT' as BotDeploymentType,
      description: '',
    },
    apiProfiles: [],
    commands: [],
    tags: ['ã‚«ã‚¹ã‚¿ãƒ ', 'ç©º', 'è‡ªç”±'],
    difficulty: 'beginner',
  },
];

/**
 * ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆIDã‹ã‚‰ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å–å¾—
 */
export function getTemplateById(id: string): BotTemplate | undefined {
  return BOT_TEMPLATES.find(template => template.id === id);
}

/**
 * ã‚«ãƒ†ã‚´ãƒªã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
 */
export function getTemplatesByCategory(category: BotTemplate['category']): BotTemplate[] {
  return BOT_TEMPLATES.filter(template => template.category === category);
}

/**
 * é›£æ˜“åº¦ã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
 */
export function getTemplatesByDifficulty(difficulty: BotTemplate['difficulty']): BotTemplate[] {
  return BOT_TEMPLATES.filter(template => template.difficulty === difficulty);
}

/**
 * ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã‚’ç”Ÿæˆ
 */
export function createProjectConfigFromTemplate(
  template: BotTemplate,
  overrides: {
    repositoryName: string;
    botName: string;
    userId: string;
    repositoryDescription?: string;
    isPrivate?: boolean;
  }
) {
  // ã‚³ãƒãƒ³ãƒ‰ã«IDã‚’ä»˜ä¸
  const commandsWithIds = template.commands.map((cmd, index) => ({
    ...cmd,
    id: `${template.id}-cmd-${index}`,
  }));

  return {
    repository: {
      name: overrides.repositoryName,
      branch: 'main',
      description: overrides.repositoryDescription || template.description,
      isPrivate: overrides.isPrivate ?? true,
    },
    botConfig: {
      name: overrides.botName,
      description: template.defaultBotConfig.description || template.description,
      deploymentType: template.defaultBotConfig.deploymentType || ('INTERACTIONS_ENDPOINT' as BotDeploymentType),
    },
    apiProfiles: template.apiProfiles,
    commands: commandsWithIds,
  };
}
